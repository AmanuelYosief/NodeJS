<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <script>
        // Making a GET request from the client to a route on the server
        // and have that route return data from the database

         //fetch('/allthedata')
         // fetch('/api'); This route can still be used, as it was previously used only for POST
         // There exists a Post method, we need to create a Get method in server.
        async function getData(){
            const response = await fetch('/api');
            const data = await response.json();
            console.log(data);

            for (item of data) {
                const div = document.createElement('div');
                const message = document.createElement('div');
                const geo = document.createElement('div');

                // For security purpose, we can't use inner html
                message.textContent = `POSTmessage: ${item.POSTmessage}`;
                geo.textContent = `${item.lat}, ${item.lon}`;
                div.append(message,geo);
                document.body.append(div);
            }
       }
       getData();
        </script>
</body>
</html>